---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Seo from '../components/Seo.astro';
import '../styles/global.css';

export interface Props {
  title: string;
  description: string;
  image?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
  section?: string;
  tags?: string[];
  canonical?: string;
}

const {
  title,
  description,
  image,
  type = 'website',
  publishedTime,
  modifiedTime,
  author,
  section,
  tags,
  canonical
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/images/favicon.png" />
  <link rel="apple-touch-icon" href="/images/favicon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  
  <Seo 
    title={title}
    description={description}
    image={image}
    type={type}
    publishedTime={publishedTime}
    modifiedTime={modifiedTime}
    author={author}
    section={section}
    tags={tags}
    canonical={canonical}
  />
</head>

<body class="min-h-screen flex flex-col bg-brand-paper text-brand-navy">
  <Header />
  
  <main id="main-content" class="flex-1" role="main">
    <slot />
  </main>
  
  <Footer />
  
  <!-- Accessibility improvements -->
  <div id="live-region" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  
  <!-- AdSense Integration -->
  <script src="/js/adsense.js"></script>
  
  <script>
    // Enhanced focus management
    document.addEventListener('DOMContentLoaded', function() {
      // Skip link functionality
      const skipLink = document.querySelector('.skip-link');
      const mainContent = document.getElementById('main-content');
      
      if (skipLink && mainContent) {
        skipLink.addEventListener('click', function(e) {
          e.preventDefault();
          mainContent.focus();
          mainContent.scrollIntoView();
        });
      }
      
      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Enhanced keyboard navigation
      document.addEventListener('keydown', function(e) {
        // ESC key to close mobile menu
        if (e.key === 'Escape') {
          const mobileMenu = document.getElementById('mobile-menu');
          const mobileMenuButton = document.getElementById('mobile-menu-button');
          
          if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.add('hidden');
            if (mobileMenuButton) {
              mobileMenuButton.setAttribute('aria-expanded', 'false');
              mobileMenuButton.focus();
            }
          }
        }
      });
    });
  </script>
</body>
</html>

<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  /* Ensure main content can receive focus */
  main:focus {
    outline: none;
  }
  
  /* Custom scrollbar for webkit browsers */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #6F7F8C;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #1E3551;
  }
</style>

